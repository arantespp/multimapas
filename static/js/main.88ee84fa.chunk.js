(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t){},20:function(e,t,a){e.exports=a(42)},25:function(e,t,a){},34:function(e,t){},35:function(e,t){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(14),o=a.n(c),l=(a(25),a(5)),i=a(8),s=a(18),u=a(2),d=a(9),m=a(4),f=a.n(m),p=a(10),b=a.n(p),v=a(15),E=a(19),g=function(){return r.a.createElement("span",null,"Carregando")},h=(a(39),function(e){return!!e.latitude&&!!e.longitude}),N=function(e){var t=e.NM_LOGRADO,a=e.NU_NUMERO;return"".concat(t," ").concat(a," S\xe3o Carlos - SP")},w=function(e){var t=e.data,a=e.isActive,c=(e.headers,e.setData),o=e.downloadData,l=e.close,i=Object(n.useState)(!1),s=Object(u.a)(i,2),d=s[0],m=s[1];return r.a.createElement(E.a,{params:{key:"AIzaSyDimOyjTMfbc4oqMMXb4Shc9ODRaMR6h9U",libraries:"places,geometry"},render:function(e){if(!e)return r.a.createElement(g,null);var n=new e.Geocoder,i=function(t){return new Promise(function(a,r){console.log("aqui no getLatLng "),setTimeout(function(){n.geocode({address:t},function(t,n){n===e.GeocoderStatus.OK?a(t[0]):(console.error(n),r(n))})},100)})};return r.a.createElement("div",{className:"modal ".concat(a&&"is-active")},r.a.createElement("div",{className:"modal-background",onClick:l}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},"Obter latitude e longitude de ",t.length," dados"),r.a.createElement("button",{className:"delete","aria-label":"close",onClick:l})),r.a.createElement("section",{className:"modal-card-body"},r.a.createElement("p",{className:"title is-6"},"Dados com latitude e longitude:"," ",t.filter(function(e){return h(e)}).length),r.a.createElement("hr",null),r.a.createElement("p",{className:"title is-6"},"Dados sem latitude e longitude:"," ",t.filter(function(e){return!h(e)}).length)),r.a.createElement("footer",{className:"modal-card-foot",style:{justifyContent:"space-between"}},r.a.createElement("button",{className:"button is-success ".concat(d?"is-loading":""),disabled:0===t.filter(function(e){return!h(e)}).length,onClick:function(){m(!0);var e=t.filter(function(e){return!h(e)}).map(function(e){return{tries:0,row:e}}),a=function(){var t=!0,a=!1,n=void 0;try{for(var r,c=e[Symbol.iterator]();!(t=(r=c.next()).done);t=!0){var o=r.value;if(o.tries<3)return o}}catch(l){a=!0,n=l}finally{try{t||null==c.return||c.return()}finally{if(a)throw n}}},n=function(){var r=Object(v.a)(b.a.mark(function r(){var o,l,s,u;return b.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=a()){r.next=3;break}return r.abrupt("return");case 3:return r.prev=3,l=N(o.row),r.next=7,i(l);case 7:s=r.sent,u=s.geometry,o.row.latitude=u.location.lat(),o.row.longitude=u.location.lng(),e=e.filter(function(e){return e.row.id!==o.row.id}),c(JSON.stringify(t)),r.next=19;break;case 15:r.prev=15,r.t0=r.catch(3),console.error("getAllLatLng err",r.t0),o.tries+=1;case 19:n();case 20:case"end":return r.stop()}},r,null,[[3,15]])}));return function(){return r.apply(this,arguments)}}();n().then(function(){console.log(t),m(!1)}).catch(console.error)}},"Obter lat/lng"),r.a.createElement("button",{className:"button",onClick:o},"Baixar novo arquivo"))),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close"}))}})},O=(a(40),function(){var e=Object(n.useState)(JSON.stringify([])),t=Object(u.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(!1),l=Object(u.a)(o,2),i=l[0],m=l[1],p=Object(n.useState)(""),b=Object(u.a)(p,2),v=b[0],E=b[1],g=Object(n.useState)(""),h=Object(u.a)(g,2),N=h[0],O=h[1],y=Object(n.useState)([]),j=Object(u.a)(y,2),k=j[0],S=j[1],x=Object(n.useState)(!1),C=Object(u.a)(x,2),D=C[0],A=C[1],_=Object(n.useState)(!1),J=Object(u.a)(_,2),M=J[0],R=J[1],L=Object(n.useRef)(null),B=function(e){return function(){return O(e)}};return r.a.createElement("div",{className:"Multimapa",onClick:function(){m(!1)}},r.a.createElement(w,{isActive:M,data:JSON.parse(a),headers:k,setData:c,close:function(){R(!1),A(!1)},downloadData:function(){var e=f.a.utils.book_new();e.SheetNames.push("Dados");var t=f.a.utils.json_to_sheet(JSON.parse(a));e.Sheets.Dados=t,f.a.writeFile(e,"".concat(v.split(".")[0],"_lat-lng.xlsx"))}}),r.a.createElement("nav",{className:"panel"},r.a.createElement("div",{className:"panel-block"},r.a.createElement("input",{style:{display:"none"},accept:".xlsx, .xls, .csv",type:"file",id:"fileInput",ref:L,onChange:function(e){if(e.target.files){A(!0);var t=e.target.files[0];E(t.name);var a=new FileReader;a.readAsBinaryString(t),a.onload=function(){var e=a.result,t=f.a.read(e,{type:"binary"}),n=t.SheetNames[0],r=t.Sheets[n],o=f.a.utils.sheet_to_json(r).map(function(e,t){return Object(s.a)({id:t},e)});c(JSON.stringify(o)),S(function(e){var t=e.reduce(function(e,t){return Object.keys(t).forEach(function(t){return e[t]=1}),e},{});return Object.keys(t)}(o)),A(!0),function(e){return e.reduce(function(e,t){return e&&!!t.latitude&&!!t.longitude},!0)}(o)?A(!1):R(!0)}}}}),r.a.createElement("button",{className:"button is-primary is-fullwidth ".concat(D?"is-loading":""),onClick:function(){L&&L.current&&L.current.click()}},"Carregar Dados")),r.a.createElement("p",{className:"panel-heading"},"Dados Geolocalizados ".concat(v?"- "+v:"")),r.a.createElement("div",{className:"panel-block"},r.a.createElement("p",{className:"control has-icons-left"},r.a.createElement("input",{className:"input is-small",type:"text",placeholder:"procurar"}),r.a.createElement("span",{className:"icon is-small is-left"},r.a.createElement(d.a,{icon:"search"})))),r.a.createElement("div",{className:"panel-tabs"},r.a.createElement("div",{className:"dropdown ".concat(i?"is-active":""),onClick:function(e){e.stopPropagation(),m(!i)}},r.a.createElement("div",{className:"dropdown-trigger"},r.a.createElement("button",{className:"button","aria-haspopup":"true","aria-controls":"dropdown-menu"},r.a.createElement("span",null,"Agrupar por ".concat(N?": "+N:"")),r.a.createElement("span",{className:"icon is-small"},r.a.createElement(d.a,{icon:"angle-down"})))),r.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu"},r.a.createElement("div",{className:"dropdown-content",style:{height:"300px",overflowY:"scroll"}},r.a.createElement("a",{href:"#",className:"dropdown-item ".concat(N?"":"is-active"),onClick:B("")},"Nenhum"),r.a.createElement("hr",{className:"dropdown-divider"}),k.map(function(e){return r.a.createElement("a",{href:"#",key:e,className:"dropdown-item",onClick:B(e)},e)})))))))});a(41);l.b.add(i.a,i.b);var y=function(){return r.a.createElement("main",{className:"App container"},r.a.createElement(O,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[20,1,2]]]);
//# sourceMappingURL=main.88ee84fa.chunk.js.map