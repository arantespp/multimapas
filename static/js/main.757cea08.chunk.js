(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t){},19:function(e,t,a){e.exports=a(44)},24:function(e,t,a){},31:function(e,t){},32:function(e,t){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){},44:function(e,t,a){"use strict";a.r(t);var n,l,c=a(0),r=a.n(c),o=a(14),s=a.n(o),i=(a(24),a(15)),u=a(8),m=a(4),d=a(9),f=a(1),g=a(3),p=a.n(g),b=a(10),h=a.n(b),E=a(16),N=a(5),v="AIzaSyA_fdJhInwwadaeFnUAe-r18Wzhx4S3-o4",w=function(){return r.a.createElement("span",null,"Carregando")},O=(a(39),500),k=function(e){return!!e.latitude&&!!e.longitude},y=function(e){var t=e.NM_LOGRADO,a=e.NU_NUMERO;return"".concat(t," ").concat(a," S\xe3o Carlos - SP")},S=r.a.memo(function(e){var t=e.data,a=e.isActive,n=(e.headers,e.setData),l=e.downloadData,o=e.close,s=Object(c.useState)(!1),i=Object(f.a)(s,2),u=i[0],m=i[1];return console.log("function",u),r.a.createElement(N.a,{params:{key:v,libraries:"places,geometry"},render:function(e){if(!e)return r.a.createElement(w,null);console.log("return ReactGoogleMapLoader",u);var c=new e.Geocoder,s=function(t){return new Promise(function(a,n){setTimeout(function(){console.log("geocoder",(new Date).getSeconds(),t),c.geocode({address:t},function(t,l){l===e.GeocoderStatus.OK?a(t[0]):(console.error(l),n(l))})},O)})},i=t.filter(function(e){return!k(e)}).map(function(e){return{tries:0,row:e}}),d=function(){var e=!0,t=!1,a=void 0;try{for(var n,l=i[Symbol.iterator]();!(e=(n=l.next()).done);e=!0){var c=n.value;if(c.tries<3)return c}}catch(r){t=!0,a=r}finally{try{e||null==l.return||l.return()}finally{if(t)throw a}}},f=function(){var e=Object(E.a)(h.a.mark(function e(){var a,l,c,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=d(),console.log("getAllLatLng1",u),a){e.next=4;break}return e.abrupt("return");case 4:return console.log("getAllLatLng2",u),e.prev=5,l=y(a.row),e.next=9,s(l);case 9:c=e.sent,r=c.geometry,console.log("try",u),a.row.latitude=r.location.lat(),a.row.longitude=r.location.lng(),i=i.filter(function(e){return e.row.id!==a.row.id}),n(JSON.stringify(t)),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(5),console.error("getAllLatLng err",e.t0),O+=250,a.tries+=1;case 23:return console.log("final da getAllLatLng",u),e.next=26,f();case 26:case"end":return e.stop()}},e,null,[[5,18]])}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"modal ".concat(a&&"is-active")},r.a.createElement("div",{className:"modal-background",onClick:o}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},"Obter latitude e longitude de ",t.length," dados"),r.a.createElement("button",{className:"delete","aria-label":"close",onClick:o})),r.a.createElement("section",{className:"modal-card-body"},r.a.createElement("p",{className:"title is-6"},"Dados com latitude e longitude:"," ",t.filter(function(e){return k(e)}).length),r.a.createElement("hr",null),r.a.createElement("p",{className:"title is-6"},"Dados sem latitude e longitude:"," ",t.filter(function(e){return!k(e)}).length)),r.a.createElement("footer",{className:"modal-card-foot",style:{justifyContent:"space-between"}},u?r.a.createElement("button",{className:"button is-success",onClick:function(){console.log(u)}},"Parar"):r.a.createElement("button",{className:"button is-success",disabled:0===t.filter(function(e){return!k(e)}).length,onClick:function(){console.log("startGeocoder1",u),m(!0),console.log("startGeocoder2",u),f().then(function(){console.log("AAAAAAAAAA",u)}).catch(function(e){return console.error("err2",e)})}},"Obter lat/lng"),r.a.createElement("button",{className:"button",onClick:l},"Baixar novo arquivo"))),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close"}))}})}),j=(a(40),[]),A=r.a.memo(function(e){var t=e.setRowDetails,a=e.data,o=e.markersColors,s=Object(c.useRef)(null);return r.a.createElement(N.a,{params:{key:v,libraries:"places,geometry"},render:function(e){return e&&(n||(n=new e.Map(s.current,{center:{lat:-22.0087,lng:-47.8909},zoom:14})),j.forEach(function(e){return e.setMap(null)}),j=a.map(function(a){var l=new e.LatLng(Number(a.latitude),Number(a.longitude)),c=new e.Marker({position:l,map:n});return c.addListener("dblclick",function(e){t(a)}),["RESUL_PRNT","RESUL_SORO","RESUL_NS1","RESUL_VI_N","RESUL_PCR_","HISTOPA_N","IMUNOH_N"].map(function(e){return 1===Number(a[e])}).reduce(function(e,t){return e||t},!1)?1===Number(a.TPAUTOCTO)?(c.setIcon("https://maps.google.com/mapfiles/ms/icons/yellow-dot.png"),o.yellow||(c.setMap(null),c.setVisible(!1))):(c.setIcon("https://maps.google.com/mapfiles/ms/icons/green-dot.png"),o.green||(c.setMap(null),c.setVisible(!1))):(c.setIcon("https://maps.google.com/mapfiles/ms/icons/blue-dot.png"),o.blue||(c.setMap(null),c.setVisible(!1))),c}).filter(function(e){return e.getVisible()}),l&&l.clearMarkers(),l=new MarkerClusterer(n,j,{imagePath:"https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m"})),r.a.createElement("div",{className:"Map",ref:s})}})}),x=(a(41),function(e){var t=e.isActive,a=e.close,n=e.row;return r.a.createElement("div",{className:"modal ".concat(t&&"is-active")},r.a.createElement("div",{className:"modal-background",onClick:a}),r.a.createElement("div",{className:"modal-card"},r.a.createElement("header",{className:"modal-card-head"},r.a.createElement("p",{className:"modal-card-title"},"Detalhes"),r.a.createElement("button",{className:"delete","aria-label":"close",onClick:a})),r.a.createElement("section",{className:"modal-card-body"},r.a.createElement("div",{className:"content"},r.a.createElement("ol",{className:"is-upper-alpha"},Object.entries(n||{}).map(function(e){var t=Object(f.a)(e,2),a=t[0],n=t[1];return r.a.createElement("li",null,r.a.createElement("strong",null,a,":")," ",n)})))),r.a.createElement("footer",{className:"modal-card-foot"},r.a.createElement("button",{className:"button",onClick:a},"Fechar"))),r.a.createElement("button",{className:"modal-close is-large","aria-label":"close"}))}),C=(a(42),function(){var e=Object(c.useState)(JSON.stringify([])),t=Object(f.a)(e,2),a=t[0],n=t[1],l=Object(c.useState)(!1),o=Object(f.a)(l,2),s=(o[0],o[1]),i=Object(c.useState)(""),u=Object(f.a)(i,2),g=u[0],b=u[1],h=Object(c.useState)([]),E=Object(f.a)(h,2),N=E[0],v=E[1],w=Object(c.useState)(!1),O=Object(f.a)(w,2),k=O[0],y=O[1],j=Object(c.useState)(!1),C=Object(f.a)(j,2),L=C[0],_=C[1],R=Object(c.useState)(!1),D=Object(f.a)(R,1)[0],M=Object(c.useState)(null),I=Object(f.a)(M,2),P=I[0],U=I[1],J=Object(c.useState)({green:!0,yellow:!0,blue:!0}),G=Object(f.a)(J,2),z=G[0],T=G[1],V=Object(c.useRef)(null),B=function(e){return function(t){T(Object(d.a)({},z,Object(m.a)({},e,t.target.checked)))}};return r.a.createElement("div",{className:"Multimapa",onClick:function(){s(!1)}},r.a.createElement(S,{isActive:L,data:JSON.parse(a),headers:N,setData:n,close:function(){_(!1),y(!1)},downloadData:function(){var e=p.a.utils.book_new();e.SheetNames.push("Dados");var t=p.a.utils.json_to_sheet(JSON.parse(a));e.Sheets.Dados=t,p.a.writeFile(e,"".concat(g.split(".")[0],"_lat-lng.xlsx"))}}),r.a.createElement(x,{isActive:!!P,row:P,close:function(){U(null)}}),r.a.createElement("div",{className:"columns is-variable is-1-mobile"},r.a.createElement("nav",{className:"panel column is-narrow is-two-fifths-tablet is-one-quarter-desktop"},r.a.createElement("p",{className:"panel-heading has-text-centered\t"},"Dados Geolocalizados ".concat(g?"- "+g:"")),r.a.createElement("div",{className:"panel-block"},r.a.createElement("input",{style:{display:"none"},accept:".xlsx, .xls, .csv",type:"file",id:"fileInput",ref:V,onChange:function(e){if(e.target.files){y(!0);var t=e.target.files[0];b(t.name);var a=new FileReader;a.readAsBinaryString(t),a.onload=function(){var e=a.result,t=p.a.read(e,{type:"binary"}),l=t.SheetNames[0],c=t.Sheets[l],r=p.a.utils.sheet_to_json(c).map(function(e,t){return Object(d.a)({id:t},e)});n(JSON.stringify(r)),v(function(e){var t=e.reduce(function(e,t){return Object.keys(t).forEach(function(t){return e[t]=1}),e},{});return Object.keys(t)}(r)),y(!0),!function(e){return e.reduce(function(e,t){return e&&!!t.latitude&&!!t.longitude},!0)}(r)&&D?_(!0):y(!1)}}}}),r.a.createElement("button",{className:"button is-primary is-fullwidth ".concat(k?"is-loading":""),onClick:function(){V&&V.current&&V.current.click()}},"Carregar Dados")),r.a.createElement("div",{className:"checkbox-container"},r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{defaultChecked:z.blue,type:"checkbox",onChange:B("blue")}),r.a.createElement("img",{src:"https://maps.google.com/mapfiles/ms/icons/blue-dot.png",height:"16px",alt:"Azul"}),"Notifica\xe7\xf5es Negativas"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{defaultChecked:z.yellow,type:"checkbox",onChange:B("yellow")}),r.a.createElement("img",{src:"https://maps.google.com/mapfiles/ms/icons/yellow-dot.png",height:"16px",alt:"Amarelo"}),"Notifica\xe7\xf5es Positivas Aut\xf3ctones"))),r.a.createElement("div",{className:"field"},r.a.createElement("div",{className:"control"},r.a.createElement("label",{className:"checkbox"},r.a.createElement("input",{defaultChecked:z.green,type:"checkbox",onChange:B("green")}),r.a.createElement("img",{src:"https://maps.google.com/mapfiles/ms/icons/green-dot.png",height:"16px",alt:"Verde"}),"Notifica\xe7\xf5es Positivas n\xe3o Aut\xf3ctones"))))),r.a.createElement("div",{id:"maps",className:"column"},r.a.createElement(A,{data:JSON.parse(a),setRowDetails:U,markersColors:z}))))});a(43);i.a.add(u.a,u.b);var L=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"is-flex header",style:{justifyContent:"center",alignItems:"center"}},r.a.createElement("h1",{className:"is-size-3 has-text-weight-normal"},"Multimapa")),r.a.createElement("main",{className:"main container is-fullhd"},r.a.createElement(C,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.757cea08.chunk.js.map